<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Giphy API</title>
  <style type="text/css">
    button,
    div,
    form,
    input {
      margin: 10px;
    }
  </style>
</head>

<body>

  <div id="topic-animals"></div>


  <form id="add-animal">
    <label for="animalSearch">Search for new animal</label>
    <!-- Added the onfocus to clear field once user clicks to add new item -->
    <input type="text" onfocus="this.value=''" id="animal-input">
    <br>
    <input id="addAnimal" type="submit" value="Search for new animal!">
  </form>


  <div id="imageArea">

  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript">


    // Array with my themes/topics
    var animals = ["dog", "cat", "horse", "bear", "cow"];
    
    // function to make a new button for each item in the array
    function makeButtons() {
      // stops buttons from duplicating each time
      $("#topic-animals").empty();
      for (var i = 0; i < animals.length; i++) {
        // for each item in the loop create a button
        var a = $("<button>");
        // adds class to the button and also adds text for each string
        a.addClass("animals").text(animals[i]);
        // adds attribute data-name for each item
        a.attr("data-name", animals[i]);
        // appends new button 
        $("#topic-animals").append(a);

        $("button").on("click", function () {
          
          console.log("WORKING");

          var picked = $(this).attr("data-name");
          var queryURL = "https://api.giphy.com/v1/gifs/search?q=" + picked + "&api_key=y0qmhKFWULgCyqCqVUg9ArvR5V5J3xI8&limit=5";
          console.log(picked);
          // ajax call
          $.ajax({
            url: queryURL,
            method: "GET"
          }).then(function (response) {
            // console.log(response);
            var imageUrl = response.data[0].images.fixed_height.url;
            var animalImage = $("<img>");
            animalImage.attr("src", imageUrl);
            animalImage.attr("alt", "image");
            $("#imageArea").prepend(animalImage);

          });
        });
      }
    }

      $("#addAnimal").on("click", function (event) {
        // function for each button click
        // prevents the button from reloading page, stops default actions
        event.preventDefault();
        // new variable to get value from input field
        var animalLook = $("#animal-input").val().trim();
        // pushes the input to the array
        animals.push(animalLook);
        // clears input field for next input
        $("#ainmal-input").val("");
        // runs the makeButtons to create the button and add to page.
        makeButtons();
      });






      makeButtons();
  </script>

</body>

</html>